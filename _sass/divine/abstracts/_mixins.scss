// VARIABLES

// Number of breakpoints
$numberof-breakpoints: length($breakpoints);

// Turning maps into lists
$breaks: map-values($breakpoints);
$break-names: map-keys($breakpoints);
$roots: map-values($spreads);


// MEDIA QUERIES

// Recommended media query: uses min-width for mobile-first development
@mixin larger-than($break) {
  // Retrieves value from map and converts to ems
  $value: map-get($breakpoints, $break);
  $value-in-ems: #{$value / 16 * 1em};

  // If the breakpoint exists in the map
  @if $value != null {
    // Prints a media query based on the value
    @media screen and (min-width: $value-in-ems) {
      @content;
    }
  }

  // If the breakpoint doesn't exist in the map
  @else {
    @warn "That breakpoint does not exist. Make sure you use one from the breakpoints map in _variables.scss";
  }
}


// RESPONSIVE ROOT SIZES

@mixin root-size {
  // Set root font size for smallest screen size
  font-size: nth($roots, 1) / 16 * 100%;

  // Loop through breakpoints and set root font size for each one
  @for $i from 2 through $numberof-breakpoints {
    @media screen and (min-width: nth($breaks, $i) / 16 * 1em) {
      font-size: nth($roots, $i) / 16 * 100%;
    }
  }
}

// FONT SIZES

// Loop through breakpoints higher than the given one and assign font size
// @function size-assignment($breakpoint, $pxs) {
//   @for $i from $breakpoint through $numberof-breakpoints {
//     @include larger-than($breakpoint) { // doesn't work yet
//       font-size: $pxs / 16 * 1rem;
//     };
//   };
// };

// @include font-size(zeta, m) -> sets zeta size for m breakpoint and up
// @include font-size(20, l) -> sets font size at 20px converted to rems for l+

// @mixin font-size($fontsize, $breakpoint: xs) {
//   // Type of variables inputted
//   $font-type: type-of($fontsize);
//   $scope-type: type-of($breakpoint);
//
//   // If $fontsize is a modular scale key
//   @if map-has-key($scale-xs, $fontsize) {
//     $convertto-break: break-#{$breakpoint}; //break-m
//     $breakpoint-index: index($break-names, $convertto-break); //3
//     $font-pixels: map-get($scale-#{$breakpoint}, $fontsize); //18
//     // Loop through breakpoints equal to and larger than one specified
//     @for $i from $breakpoint-index through $numberof-breakpoints { //3-5
//       @include larger-than(nth($break-names, $i)) { //>break-m
//         font-size: $font-pixels / 16 * 1em;
//       };
//     };
//   };
//
//   @else if $font-type == number {
//
//   };

// $breaks: map-values($breakpoints);
// $break-names: map-keys($breakpoints);
// $roots: map-values($spreads);
$scale-maps: map-keys($modular-scale);

@function map-deep-get($map, $keys...) {
  @each $key in $keys {
    $map: map-get($map, $key);
  }
  @return $map;
}

@mixin font-size($fontsize, $breakpoint: xs) {
  // variables
  $given-breakpoint: break-#{$breakpoint};
  $given-breakpoint-index: index($break-names, $given-breakpoint);

  // if the fontsize is a number
  @if type-of($fontsize) == number {
    @include larger-than($given-breakpoint) {
      font-size: $fontsize * 1px;
    }
  }
  // if fontsize is a modular scale value
  @else if map-has-key($scale-xs, $fontsize) {
    // loop through breakpoints >= given breakpoint
    @for $i from $given-breakpoint-index through $numberof-breakpoints {
      $specific-scale-map: nth($scale-maps, $i); // scale-m
      $fontsize-value: deep-map-get($modular-scale, $specific-scale-map, $fontsize); // 18

      @include larger-than($given-breakpoint) {
        font-size: $fontsize-value * 1px;
      }
    }
  }
  @else {
    @warn "#{$fontsize} is not a valid font size. Please choose either a modular scale value or a pixel value."
  }
}


  // Assign given breakpoint
  // Loop through breakpoints
  // Get scale associated with that breakpoint
  // Look up value for given key
  // Convert to rems
  // Set font size
